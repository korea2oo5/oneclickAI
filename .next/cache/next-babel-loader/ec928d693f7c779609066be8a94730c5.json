{"ast":null,"code":"var _jsxFileName = \"E:\\\\react\\\\OneClickAI\\\\front\\\\components\\\\ImgGenerate.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { Component, useRef, useState, useEffect, useCallback } from \"react\";\nimport { imgsAdd, imgsDel, containerDel, imgsLabelUpdate, imgsComUpdate } from \"../reducers/imgs\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Webcam from \"react-webcam\";\nexport default function BtnGenerate(_ref) {\n  _s();\n\n  var _this = this;\n\n  var id = _ref.id;\n  console.log(\"ImgGenerate Initiallised container: \", id);\n  var container = useSelector(function (state) {\n    return state.imgs[0].container;\n  });\n  var dispatch = useDispatch();\n  var contId = id; // 컨테이너 아이디를 재정의... 필요한가?\n\n  var imgSrc; // 웹캠으로 찍히는 사진 변수\n\n  var labelInputId = \"labelHolder\" + contId.toString(); // input에 필요한 unique id, key를 이런식으로 만듬\n\n  var comInputId = \"comHolder\" + contId.toString(); // input에 필요한 unique id, key를 이런식으로 만듬\n\n  var chosenContainer = container.filter(function (obj) {\n    return obj.id == contId;\n  });\n  var chosenImgSet = chosenContainer[0].img;\n  var webcamRef = useRef(null);\n  var intervalRef = useRef(null); // image capture 진행\n\n  var capture = useCallback(function () {\n    console.log(\"ImgGenerate: img capture activated\");\n    imgSrc = webcamRef.current.getScreenshot();\n    dispatch(imgsAdd({\n      id: contId,\n      src: imgSrc\n    }));\n  }, [imgSrc]); // capture를 여러번 동작시키기 위해 pressHold 만듬\n\n  var pressHold = useCallback(function () {\n    console.log(\"ImgGenerate: PressHold Activated\");\n    capture();\n    intervalRef.current = setInterval(capture, 100);\n  }, [imgSrc]); // 누르면 삭제\n\n  function ContainerDel() {\n    console.log(\"ImgGenerate: DeleteContainer\");\n    dispatch(containerDel({\n      id: contId\n    }));\n  } // 라벨 업데이트\n\n\n  function ImgLabelUpdate() {\n    console.log(\"ImgGenerate: Labels will be updated!!\");\n    var label = document.getElementById(labelInputId).value;\n    dispatch(imgsLabelUpdate({\n      id: contId,\n      label: label\n    }));\n  } // comment 업데이트\n\n\n  function ImgComUpdate() {\n    console.log(\"ImgGenerate: A Comment is updated!!\");\n    var comment = document.getElementById(comInputId).value;\n    dispatch(imgsComUpdate({\n      id: contId,\n      comment: comment\n    }));\n  }\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    id: labelInputId,\n    placeholder: \"Label here\",\n    onBlur: ImgLabelUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    id: comInputId,\n    placeholder: \"Comment here\",\n    onBlur: ImgComUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), __jsx(\"button\", {\n    onClick: ContainerDel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, \"Delete This container\"), __jsx(Webcam, {\n    audio: false,\n    ref: webcamRef,\n    screenshotFormat: \"image/jpeg\",\n    width: \"200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }), __jsx(\"button\", {\n    onMouseDown: pressHold,\n    onMouseUp: function onMouseUp() {\n      return clearInterval(intervalRef.current);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return clearInterval(intervalRef.current);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"Capture photo\"), chosenImgSet.map(function (imgs) {\n    return __jsx(\"img\", {\n      key: imgs.iid,\n      id: imgs.iid,\n      src: imgs.src,\n      width: \"100\",\n      onClick: function onClick() {\n        return dispatch(imgsDel({\n          id: contId,\n          iid: imgs.iid\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    });\n  })));\n}\n\n_s(BtnGenerate, \"erXnUz1YcS4oyu/loL1qdF33oEI=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = BtnGenerate;\n\nvar _c;\n\n$RefreshReg$(_c, \"BtnGenerate\");","map":{"version":3,"sources":["E:/react/OneClickAI/front/components/ImgGenerate.jsx"],"names":["React","Component","useRef","useState","useEffect","useCallback","imgsAdd","imgsDel","containerDel","imgsLabelUpdate","imgsComUpdate","useSelector","useDispatch","Webcam","BtnGenerate","id","console","log","container","state","imgs","dispatch","contId","imgSrc","labelInputId","toString","comInputId","chosenContainer","filter","obj","chosenImgSet","img","webcamRef","intervalRef","capture","current","getScreenshot","src","pressHold","setInterval","ContainerDel","ImgLabelUpdate","label","document","getElementById","value","ImgComUpdate","comment","clearInterval","map","iid"],"mappings":"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","sourcesContent":["import React, {\r\n  Component,\r\n  useRef,\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  imgsAdd,\r\n  imgsDel,\r\n  containerDel,\r\n  imgsLabelUpdate,\r\n  imgsComUpdate,\r\n} from \"../reducers/imgs\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Webcam from \"react-webcam\";\r\n\r\nexport default function BtnGenerate({ id }) {\r\n  console.log(\"ImgGenerate Initiallised container: \", id);\r\n  const container = useSelector((state) => state.imgs[0].container);\r\n  const dispatch = useDispatch();\r\n\r\n  let contId = id; // 컨테이너 아이디를 재정의... 필요한가?\r\n  let imgSrc; // 웹캠으로 찍히는 사진 변수\r\n  let labelInputId = \"labelHolder\" + contId.toString(); // input에 필요한 unique id, key를 이런식으로 만듬\r\n  let comInputId = \"comHolder\" + contId.toString(); // input에 필요한 unique id, key를 이런식으로 만듬\r\n\r\n  const chosenContainer = container.filter((obj) => obj.id == contId);\r\n  const chosenImgSet = chosenContainer[0].img;\r\n\r\n  const webcamRef = useRef(null);\r\n  const intervalRef = useRef(null);\r\n\r\n  // image capture 진행\r\n  const capture = useCallback(() => {\r\n    console.log(\"ImgGenerate: img capture activated\");\r\n    imgSrc = webcamRef.current.getScreenshot();\r\n    dispatch(imgsAdd({ id: contId, src: imgSrc }));\r\n  }, [imgSrc]);\r\n\r\n  // capture를 여러번 동작시키기 위해 pressHold 만듬\r\n  const pressHold = useCallback(() => {\r\n    console.log(\"ImgGenerate: PressHold Activated\");\r\n    capture();\r\n    intervalRef.current = setInterval(capture, 100);\r\n  }, [imgSrc]);\r\n\r\n  // 누르면 삭제\r\n  function ContainerDel() {\r\n    console.log(\"ImgGenerate: DeleteContainer\");\r\n    dispatch(containerDel({ id: contId }));\r\n  }\r\n\r\n  // 라벨 업데이트\r\n  function ImgLabelUpdate() {\r\n    console.log(\"ImgGenerate: Labels will be updated!!\");\r\n    let label = document.getElementById(labelInputId).value;\r\n    dispatch(imgsLabelUpdate({ id: contId, label: label }));\r\n  }\r\n\r\n  // comment 업데이트\r\n  function ImgComUpdate() {\r\n    console.log(\"ImgGenerate: A Comment is updated!!\");\r\n    let comment = document.getElementById(comInputId).value;\r\n    dispatch(imgsComUpdate({ id: contId, comment: comment }));\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          id={labelInputId}\r\n          placeholder=\"Label here\"\r\n          onBlur={ImgLabelUpdate}\r\n        ></input>\r\n\r\n        <input\r\n          type=\"text\"\r\n          id={comInputId}\r\n          placeholder=\"Comment here\"\r\n          onBlur={ImgComUpdate}\r\n        ></input>\r\n\r\n        <button onClick={ContainerDel}>Delete This container</button>\r\n\r\n        <Webcam\r\n          audio={false}\r\n          ref={webcamRef}\r\n          screenshotFormat=\"image/jpeg\"\r\n          width=\"200\"\r\n        />\r\n\r\n        <button\r\n          onMouseDown={pressHold}\r\n          onMouseUp={() => clearInterval(intervalRef.current)}\r\n          onMouseLeave={() => clearInterval(intervalRef.current)}\r\n        >\r\n          Capture photo\r\n        </button>\r\n\r\n        {chosenImgSet.map((imgs) => (\r\n          <img\r\n            key={imgs.iid}\r\n            id={imgs.iid}\r\n            src={imgs.src}\r\n            width=\"100\"\r\n            onClick={() => dispatch(imgsDel({ id: contId, iid: imgs.iid }))}\r\n          />\r\n        ))}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}